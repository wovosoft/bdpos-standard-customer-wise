(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{134:function(t,e,r){"use strict";r.r(e);var n=r(8),o=r.n(n),a=r(2),s={name:"Overview",props:{report:{default:function(){}}},methods:{obj2Table:a.l,startCase:a.t}},u=r(1),l=Object(u.a)(s,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("b-table",{attrs:{"head-variant":"dark",small:"",items:t.obj2Table(t.report)},scopedSlots:t._u([{key:"cell(key)",fn:function(e){return[t._v("\n        "+t._s(t._t(e.item.key,t.startCase(e.item.key)))+"\n    ")]}},{key:"cell(value)",fn:function(e){return[["sales_payable","sales_paid","sales_balance"].includes(e.item.key)?[t._v("\n            "+t._s(t._f("currency")(e.item.value))+"\n        ")]:[t._v("\n            "+t._s(e.item.value)+"\n        ")]]}}])})}),[],!1,null,null,null).exports,i=r(26),c=r.n(i);o.a.extend(c.a);var f={props:{report:{default:function(){return[]}}},methods:{obj2Table:a.l,startCase:a.t,dayjs:o.a,sum:function(t){var e=0;return this.report.forEach((function(r){return e+=r[t]})),e},percentage:function(t){var e=0;return this.report.forEach((function(r){return e=Number(r.total||0)*Number(r[t]||0)/100})),e}},computed:{numCustomers:function(){var t=[];return this.report.forEach((function(e){t.includes(e.customer_id)||t.push(e.customer_id)})),t.length}},data:function(){var t=this;return{fields:[{key:"id",name:"sales.id",sortable:!0,label:_t("id","ID")},{key:"customer_id",name:"sales.customer_id",sortable:!0,label:_t("customer_id","Customer ID")},{key:"customer_name",name:"customers.name",sortable:!0,label:_t("customer","Customer")},{key:"total",sortable:!0,label:_t("total","Total"),formatter:function(e){return t.$options.filters.currency(e||0)}},{key:"tax",sortable:!0,label:_t("tax","Tax"),formatter:function(e){return t.$options.filters.currency(e||0)}},{key:"discount",sortable:!0,label:_t("discount","Discount"),formatter:function(e){return t.$options.filters.currency(e||0)}},{key:"payable",sortable:!0,label:_t("payable","Payable"),formatter:function(e){return t.$options.filters.currency(e||0)}},{key:"paid",sortable:!0,label:_t("paid","Paid"),formatter:function(e){return t.$options.filters.currency(e||0)}},{key:"balance",sortable:!0,label:_t("balance","Balance"),formatter:function(e){return t.$options.filters.currency(e||0)}},{key:"created_at",name:"sales.created_at",sortable:!0,label:_t("created_at","Created At"),formatter:function(e){return t.$options.filters.dayjs(e,"hh:mm:ss A")}}]}}},_=Object(u.a)(f,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-table",{attrs:{"head-variant":"dark","foot-variant":"light",small:"",fields:t.fields,"foot-clone":"",items:t.report},scopedSlots:t._u([{key:"foot(customer_id)",fn:function(e){return[t._v("\n        "+t._s(t._f("localNumber")(t.numCustomers))+" "+t._s(t.__("persons","Persons"))+"\n    ")]}},{key:"foot(id)",fn:function(e){return[t._v("\n        "+t._s(t._f("localNumber")(t.report.length))+" Sales\n    ")]}},{key:"foot(total)",fn:function(e){return[t._v("\n        "+t._s(t._f("currency")(t.sum("total")))+"\n    ")]}},{key:"foot(tax)",fn:function(e){return[t._v("\n        "+t._s(t._f("currency")(t.percentage("tax")))+"\n    ")]}},{key:"foot(discount)",fn:function(e){return[t._v("\n        "+t._s(t._f("currency")(t.percentage("discount")))+"\n    ")]}},{key:"foot(payable)",fn:function(e){return[t._v("\n        "+t._s(t._f("currency")(t.sum("payable")))+"\n    ")]}},{key:"foot(paid)",fn:function(e){return[t._v("\n        "+t._s(t._f("currency")(t.sum("paid")))+"\n    ")]}},{key:"foot(balance)",fn:function(e){return[t._v("\n        "+t._s(t._f("currency")(t.sum("balance")))+"\n    ")]}},{key:"foot(created_at)",fn:function(e){return[t.report&&t.report.length?r("div",[t._v("\n            "+t._s(t.dayjs(t.report[0].created_at).to(t.report[t.report.length-1].created_at,!0))+"\n        ")]):t._e()]}}])})}),[],!1,null,null,null).exports;o.a.extend(c.a);var m={props:{report:{default:function(){return[]}}},methods:{obj2Table:a.l,startCase:a.t,dayjs:o.a,sum:function(t){var e=0;return this.report.forEach((function(r){return e+=r[t]})),e},percentage:function(t){var e=0;return this.report.forEach((function(r){return e=Number(r.total||0)*Number(r[t]||0)/100})),e},countItems:function(t){var e=[];return this.report.forEach((function(r){e.includes(r[t])||e.push(r[t])})),e.length}},data:function(){var t=this;return{fields:[{key:"id",sortable:!0,label:_t("id","ID")},{key:"sale_id",name:"sales.id",sortable:!0,label:_t("sale_id","Sale ID")},{key:"customer_id",sortable:!0,label:_t("customer_id","Customer ID")},{key:"customer_name",name:"customers.name",sortable:!0,label:_t("customer_name","Customer Name")},{key:"product_id",name:"products.name",sortable:!0,label:_t("product_id","Product ID")},{key:"product_name",sortable:!0,label:_t("product_name","Product Name")},{key:"price",sortable:!0,label:_t("price","Price"),formatter:function(e){return t.$options.filters.currency(e||0)}},{key:"quantity",sortable:!0,label:_t("quantity","Quantity"),formatter:function(e){return t.$options.filters.localNumber(e||0)}},{key:"total",sortable:!0,label:_t("total","Total"),formatter:function(e){return t.$options.filters.currency(e||0)}},{key:"tax",sortable:!0,label:_t("tax","Tax"),formatter:function(t){return(t||0)+"%"}},{key:"discount",sortable:!0,label:_t("discount","Discount"),formatter:function(t){return(t||0)+"%"}},{key:"payable",sortable:!0,label:_t("payable","Payable"),formatter:function(e){return t.$options.filters.currency(e||0)}},{key:"created_at",name:"sales.created_at",sortable:!0,label:_t("created_at","Created At"),formatter:function(e){return t.$options.filters.dayjs(e,"hh:mm:ss A")}}]}}},d=Object(u.a)(m,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-table",{attrs:{"head-variant":"dark","foot-variant":"light",small:"",fields:t.fields,"foot-clone":"",items:t.report},scopedSlots:t._u([{key:"foot(id)",fn:function(e){return[t._v("\n        "+t._s(t._f("localNumber")(t.report.length))+"\n    ")]}},{key:"foot(customer_id)",fn:function(e){return[t._v("\n        "+t._s(t._f("localNumber")(t.countItems("customer_id")))+"\n    ")]}},{key:"foot(sale_id)",fn:function(e){return[t._v("\n        "+t._s(t._f("localNumber")(t.countItems("sale_id")))+"\n    ")]}},{key:"foot(product_id)",fn:function(e){return[t._v("\n        "+t._s(t._f("localNumber")(t.countItems("product_id")))+"\n    ")]}},{key:"foot(price)",fn:function(e){return[t._v("\n        "+t._s(t._f("currency")(t.sum("price")))+"\n    ")]}},{key:"foot(quantity)",fn:function(e){return[t._v("\n        "+t._s(t._f("localNumber")(t.sum("quantity")))+"\n    ")]}},{key:"foot(total)",fn:function(e){return[t._v("\n        "+t._s(t._f("currency")(t.sum("total")))+"\n    ")]}},{key:"foot(tax)",fn:function(e){return[t._v("\n        "+t._s(t._f("currency")(t.percentage("tax")))+"\n    ")]}},{key:"foot(discount)",fn:function(e){return[t._v("\n        "+t._s(t._f("currency")(t.percentage("discount")))+"\n    ")]}},{key:"foot(payable)",fn:function(e){return[t._v("\n        "+t._s(t._f("currency")(t.sum("payable")))+"\n    ")]}},{key:"foot(paid)",fn:function(e){return[t._v("\n        "+t._s(t._f("currency")(t.sum("paid")))+"\n    ")]}},{key:"foot(balance)",fn:function(e){return[t._v("\n        "+t._s(t._f("currency")(t.sum("balance")))+"\n    ")]}},{key:"foot(created_at)",fn:function(e){return[t.report&&t.report.length?r("div",[t._v("\n            "+t._s(t.dayjs(t.report[0].created_at).to(t.report[t.report.length-1].created_at,!0))+"\n        ")]):t._e()]}}])})}),[],!1,null,null,null).exports;o.a.extend(c.a);var p={props:{report:{default:function(){return[]}}},methods:{obj2Table:a.l,startCase:a.t,dayjs:o.a,sum:function(t){var e=0;return this.report.forEach((function(r){return e+=r[t]})),e},percentage:function(t){var e=0;return this.report.forEach((function(r){return e=Number(r.total||0)*Number(r[t]||0)/100})),e},countItems:function(t){var e=[];return this.report.forEach((function(r){e.includes(r[t])||e.push(r[t])})),e.length}},computed:{numCustomers:function(){var t=[];return this.report.forEach((function(e){t.includes(e.customer_id)||t.push(e.customer_id)})),t.length}},data:function(){var t=this;return{fields:[{key:"product_id",name:"sale_items.product_id",sortable:!0,label:_t("pid","PID")},{key:"name",name:"products.name",sortable:!0,label:_t("name","Name")},{key:"customers",sortable:!0,label:_t("customers","Customers")},{key:"sales",sortable:!0,label:_t("sales","Sales")},{key:"quantity",sortable:!0,label:_t("quantity","Quantity")},{key:"total",sortable:!0,label:_t("total","Total"),formatter:function(e){return t.$options.filters.currency(e||0)}},{key:"tax",sortable:!0,label:_t("tax","Tax"),formatter:function(e){return t.$options.filters.currency(e||0)}},{key:"discount",sortable:!0,label:_t("discount","Discount"),formatter:function(e){return t.$options.filters.currency(e||0)}},{key:"payable",sortable:!0,label:_t("payable","Payable"),formatter:function(e){return t.$options.filters.currency(e||0)}}]}}},y=Object(u.a)(p,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("b-table",{attrs:{"head-variant":"dark","foot-variant":"light",small:"",fields:t.fields,"foot-clone":"",items:t.report},scopedSlots:t._u([{key:"foot(product_id)",fn:function(e){return[t._v("\n        "+t._s(t._f("localNumber")(t.countItems("product_id")))+" "+t._s(t.__("items","Items"))+"\n    ")]}},{key:"foot(customers)",fn:function(e){return[t._v("\n        "+t._s(t._f("localNumber")(t.sum("customers")))+" "+t._s(t.__("persons","Persons"))+"\n    ")]}},{key:"foot(sales)",fn:function(e){return[t._v("\n        "+t._s(t._f("localNumber")(t.sum("sales")))+"\n    ")]}},{key:"foot(quantity)",fn:function(e){return[t._v("\n        "+t._s(t._f("localNumber")(t.sum("quantity")))+" "+t._s(t.__("items","Items"))+"\n    ")]}},{key:"foot(total)",fn:function(e){return[t._v("\n        "+t._s(t._f("currency")(t.sum("total")))+"\n    ")]}},{key:"foot(tax)",fn:function(e){return[t._v("\n        "+t._s(t._f("currency")(t.sum("tax")))+"\n    ")]}},{key:"foot(discount)",fn:function(e){return[t._v("\n        "+t._s(t._f("currency")(t.sum("discount")))+"\n    ")]}},{key:"foot(payable)",fn:function(e){return[t._v("\n        "+t._s(t._f("currency")(t.sum("payable")))+"\n    ")]}}])})}),[],!1,null,null,null).exports;o.a.extend(c.a);var b={props:{report:{default:function(){return[]}}},methods:{obj2Table:a.l,startCase:a.t,dayjs:o.a,sum:function(t){var e=0;return this.report.forEach((function(r){return e+=r[t]})),e},percentage:function(t){var e=0;return this.report.forEach((function(r){return e=Number(r.total||0)*Number(r[t]||0)/100})),e},countItems:function(t){var e=[];return this.report.forEach((function(r){e.includes(r[t])||e.push(r[t])})),e.length}},computed:{numCustomers:function(){var t=[];return this.report.forEach((function(e){t.includes(e.customer_id)||t.push(e.customer_id)})),t.length}},data:function(){var t=this;return{fields:[{key:"customer_id",name:"sales.customer_id",sortable:!0,label:_t("customer_id","Customer ID")},{key:"customer_name",name:"customers.name",sortable:!0,label:_t("customer_name","Customer Name")},{key:"sales_quantity",sortable:!0,label:_t("sales_quantity","Sales Quantity"),formatter:function(e){return t.$options.filters.localNumber(e)}},{key:"sales_total",sortable:!0,label:_t("total","Total"),formatter:function(e){return t.$options.filters.currency(e)}},{key:"sales_tax",sortable:!0,label:_t("tax","Tax"),formatter:function(e){return t.$options.filters.currency(e)}},{key:"sales_discount",sortable:!0,label:_t("discount","Discount"),formatter:function(e){return t.$options.filters.currency(e)}},{key:"sales_payable",sortable:!0,label:_t("payable","Payable"),formatter:function(e){return t.$options.filters.currency(e||0)}},{key:"sales_paid",sortable:!0,label:_t("paid","Paid"),formatter:function(e){return t.$options.filters.currency(e||0)}},{key:"sales_balance",sortable:!0,label:_t("balance","Balance"),formatter:function(e){return t.$options.filters.currency(e||0)}}]}}},v={name:"Daily",components:{ListSaleItems:d,ListSales:_,Overview:l,ListProducts:y,ListByCustomer:Object(u.a)(b,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("b-table",{attrs:{"head-variant":"dark","foot-variant":"light",small:"",fields:t.fields,"foot-clone":"",items:t.report},scopedSlots:t._u([{key:"foot(customer_id)",fn:function(e){return[t._v("\n        "+t._s(t._f("localNumber")(t.countItems("customer_id")))+" "+t._s(t.__("persons","Persons"))+"\n    ")]}},{key:"foot(sales_quantity)",fn:function(e){return[t._v("\n        "+t._s(t._f("localNumber")(t.sum("sales_quantity")))+" "+t._s(t.__("items","Items"))+"\n    ")]}},{key:"foot(sales_total)",fn:function(e){return[t._v("\n        "+t._s(t._f("currency")(t.sum("sales_total")))+"\n    ")]}},{key:"foot(sales_tax)",fn:function(e){return[t._v("\n        "+t._s(t._f("currency")(t.sum("sales_tax")))+"\n    ")]}},{key:"foot(sales_discount)",fn:function(e){return[t._v("\n        "+t._s(t._f("currency")(t.sum("sales_discount")))+"\n    ")]}},{key:"foot(sales_payable)",fn:function(e){return[t._v("\n        "+t._s(t._f("currency")(t.sum("sales_payable")))+"\n    ")]}},{key:"foot(sales_paid)",fn:function(e){return[t._v("\n        "+t._s(t._f("currency")(t.sum("sales_paid")))+"\n    ")]}},{key:"foot(sales_balance)",fn:function(e){return[t._v("\n        "+t._s(t._f("currency")(t.sum("sales_balance")))+"\n    ")]}}])})}),[],!1,null,null,null).exports},data:function(){return{form:{date:o()().format("YYYY-MM-DD"),type:"overview"},report:null}},watch:{form:{deep:!0,handler:function(t){this.handleSubmit()}}},mounted:function(){this.handleSubmit()},methods:{obj2Table:a.l,startCase:a.t,isArray:a.h,isObject:a.i,handleSubmit:function(){var t=this;this.report=null,this.$refs.the_form.reportValidity()&&axios.post(route("Backend.Sales.Reports").url(),JSON.parse(JSON.stringify(this.form))).then((function(e){t.$set(t,"report",e.data),console.log(e.data)})).catch((function(e){var r=e.response;console.log(r),t.$set(t,"report",null)}))}}},h=Object(u.a)(v,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("b-form",{ref:"the_form",on:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}}},[r("b-form-row",[r("b-col",{attrs:{md:"4",sm:"12"}},[r("b-form-group",{attrs:{label:t.__("starting_date","Starting Date")}},[r("b-input-group",{scopedSlots:t._u([{key:"append",fn:function(){return[r("b-button",{on:{click:function(e){t.form.starting_date=null,t.form.ending_date=null}}},[t._v("x")])]},proxy:!0}])},[r("b-input",{attrs:{type:"date"},model:{value:t.form.starting_date,callback:function(e){t.$set(t.form,"starting_date",e)},expression:"form.starting_date"}})],1)],1)],1),t._v(" "),r("b-col",{attrs:{md:"4",sm:"12"}},[r("b-form-group",{attrs:{label:t.__("ending_date","Ending Date")}},[r("b-input-group",{scopedSlots:t._u([{key:"append",fn:function(){return[r("b-button",{on:{click:function(e){t.form.ending_date=null}}},[t._v("x")])]},proxy:!0}])},[r("b-input",{attrs:{disabled:!t.form.starting_date,min:t.form.starting_date,type:"date"},model:{value:t.form.ending_date,callback:function(e){t.$set(t.form,"ending_date",e)},expression:"form.ending_date"}})],1)],1)],1),t._v(" "),r("b-col",{attrs:{md:"4",sm:"12"}},[r("b-form-group",{attrs:{label:t.__("type","Type")}},[r("b-form-select",{attrs:{required:!0,options:[{text:"Overview",value:"overview"},{text:"List Sales",value:"list_sales"},{text:"List Sale Items",value:"list_sale_items"},{text:"Products",value:"products"},{text:"Customer",value:"customer"}]},on:{change:function(e){t.report=null}},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}})],1)],1)],1)],1),t._v(" "),r("h2",{staticClass:"card-title"},[t._v("\n        "+t._s(t.__("daily_sales_report","Daily Sales Report"))+"\n    ")]),t._v(" "),t.isObject(t.report)&&"overview"===t.form.type?[r("overview",{attrs:{report:t.report}})]:t.isArray(t.report)&&"list_sales"===t.form.type?[r("list-sales",{attrs:{report:t.report}})]:t.isArray(t.report)&&"list_sale_items"===t.form.type?[r("list-sale-items",{attrs:{report:t.report}})]:t.isArray(t.report)&&"products"===t.form.type?[r("list-products",{attrs:{report:t.report}})]:t.isArray(t.report)&&"customer"===t.form.type?[r("list-by-customer",{attrs:{report:t.report}})]:t._e()],2)}),[],!1,null,"33577ef0",null);e.default=h.exports},26:function(t,e,r){t.exports=function(){"use strict";return function(t,e,r){t=t||{};var n=e.prototype,o={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};r.en.relativeTime=o;var a=function(e,n,a,s){for(var u,l,i,c=a.$locale().relativeTime||o,f=t.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],_=f.length,m=0;m<_;m+=1){var d=f[m];d.d&&(u=s?r(e).diff(a,d.d,!0):a.diff(e,d.d,!0));var p=(t.rounding||Math.round)(Math.abs(u));if(i=u>0,p<=d.r||!d.r){p<=1&&m>0&&(d=f[m-1]);var y=c[d.l];l="string"==typeof y?y.replace("%d",p):y(p,n,d.l,i);break}}return n?l:(i?c.future:c.past).replace("%s",l)};n.to=function(t,e){return a(t,e,this,!0)},n.from=function(t,e){return a(t,e,this)};var s=function(t){return t.$u?r.utc():r()};n.toNow=function(t){return this.to(s(this),t)},n.fromNow=function(t){return this.from(s(this),t)}}}()}}]);