(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{12:function(e,t,a){"use strict";var r=a(2),s=a(21);t.a={props:{item:{type:Object,default:function(){return{}}}},methods:{obj2Table:r.l,startCase:s.a,getItem:r.e},data:function(){return{the_item:{}}},mounted:function(){var e=this;this.the_item=this.item,Object.keys(this.item).length||this.getItem(this.$route.params.id,this.$parent.$props.api_url).then((function(t){e.the_item=t.data})).catch((function(e){return console.log(e.response)}))}}},151:function(e,t,a){"use strict";a.r(t);var r=a(12),s=a(61),n=a(27),i=a(2),l={mixins:[r.a],components:{PaymentsHistory:s.a},methods:{msgBox:i.k,returnItems:function(e){var t=this;if(e.quantity<e.return_quantity)return this.msgBox({message:"Return Qty. should be less than quantity",type:"danger",title:"Failed"}),!1;axios.post(route("Backend.Sales.Items.Return",{sale:e.sale_id,sale_item:e.id}).url(),{return_quantity:e.return_quantity}).then((function(e){t.msgBox(e.data),t.dirty=!0,t.getItem(t.$route.params.id,t.$parent.$props.api_url).then((function(e){t.the_item=e.data})).catch((function(e){return console.log(e.response)}))})).catch((function(e){t.msgBox(e.response.data),console.log(e.response)}))}},data:function(){var e=this;return{dirty:!1,statuses:n.a,saleItemFields:[{key:"product_name",label:_t("product_name","Product Name")},{key:"quantity",label:_t("quantity","Quantity")},{key:"price",label:_t("price","Price"),formatter:function(t){return e.$options.filters.currency(t)}},{key:"payable",label:_t("payable","Payable"),formatter:function(t){return e.$options.filters.currency(t)}},{key:"return_quantity",label:_t("return_quantity","Returned Qty.")},{key:"return_price",label:_t("return_price","Returned Price"),formatter:function(t){return e.$options.filters.currency(t)}}]}}},u=a(1),o=Object(u.a)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-modal",{attrs:{visible:"",size:"xl","header-bg-variant":"dark","header-text-variant":"light","no-body":"",title:e.__("view_sale","View Sale"),lazy:""},on:{hidden:function(){e.$router.go(-1),e.$emit("reset",!0),e.dirty&&e.$emit("refreshDatatable",!0)}}},[a("b-row",[a("b-col",{attrs:{sm:"12",md:"4"}},[a("h4",[e._v(e._s(e.__("customer_details","Customer Details")))]),e._v(" "),a("b-table",{attrs:{items:e.obj2Table(e.the_item.customer,["deleted_at"]),fields:[{key:"key",label:e.__("key","Key"),formatter:function(t){return e.__(t,e.startCase(t))}},{key:"value",label:e.__("value","Value")}],striped:"",bordered:"",small:"","head-variant":"dark"},scopedSlots:e._u([{key:"cell(value)",fn:function(t){return[["created_at","updated_at"].includes(t.item.key)?[e._v("\n                        "+e._s(e._f("dayjs")(t.item.value))+"\n                    ")]:[e._v(e._s(t.item.value))]]}}])})],1),e._v(" "),a("b-col",{attrs:{sm:"12",md:"8"}},[a("h4",[e._v(e._s(e.__("cart_details","Cart Details")))]),e._v(" "),a("b-table",{attrs:{small:"",hover:"",striped:"",bordered:"","head-variant":"dark",items:e.obj2Table(e.the_item,["deleted_at","image","items","customer","customer_name"]),fields:[{label:e.__("key","Key"),key:"key",sortable:!0,formatter:function(t){return e.__(t,e.startCase(t))}},{label:e.__("value","Value"),key:"value",sortable:!0}]},scopedSlots:e._u([{key:"cell(value)",fn:function(t){return[["created_at","updated_at"].includes(t.item.key)?[e._v("\n                        "+e._s(e._f("dayjs")(t.item.value))+"\n                    ")]:["description"].includes(t.item.key)?[a("div",{domProps:{innerHTML:e._s(t.item.value)}})]:["thumbnail"].includes(t.item.key)?[a("b-img-lazy",{attrs:{fluid:"",src:t.item.value}})]:[e._v(e._s(t.item.value))]]}}])})],1)],1),e._v(" "),a("h3",{staticClass:"text-center"},[e._v(e._s(e.__("sale_items","Sale Items")))]),e._v(" "),a("b-table",{attrs:{small:"",striped:"",bordered:"","head-variant":"dark",items:e.the_item.items,fields:e.saleItemFields},scopedSlots:e._u([{key:"cell(return_quantity)",fn:function(t){return[a("b-form",{on:{submit:function(a){return a.preventDefault(),e.returnItems(t.item)}}},[a("b-input-group",{attrs:{size:"sm"},scopedSlots:e._u([{key:"append",fn:function(){return[a("b-button",{attrs:{title:e.__("submit","Submit"),type:"submit"}},[a("b-icon-arrow-clockwise")],1)]},proxy:!0}],null,!0)},[a("b-input",{attrs:{max:t.item.quantity,type:"number",step:"any"},model:{value:t.item.return_quantity,callback:function(a){e.$set(t.item,"return_quantity",a)},expression:"row.item.return_quantity"}})],1)],1)]}}])}),e._v(" "),a("h3",{staticClass:"text-center"},[e._v("Payments History")]),e._v(" "),a("payments-history",{attrs:{sale:e.the_item,"customer-overview":!1}})],1)}),[],!1,null,null,null);t.default=o.exports},27:function(e,t,a){"use strict";t.a=[{text:_t("returned","Returned"),value:"Returned"},{text:_t("processed","Processed"),value:"Processed"},{text:_t("cancelled","Cancelled"),value:"Cancelled"}]},61:function(e,t,a){"use strict";var r={props:{sale:{type:Object,required:!0},customerOverview:{type:Boolean,default:!0}},data:function(){var e=this;return{items:[],fields:[{key:"id",label:_t("id","ID")},{key:"payment_method",label:_t("payment_method","Method")},{key:"payment_amount",label:_t("payment_amount","Payment Amount"),formatter:function(t){return e.$options.filters.currency(t)}},{key:"bank",label:_t("bank","Bank")},{key:"check",label:_t("check","Check")},{key:"transaction_no",label:_t("transaction_no","Transaction No.")},{key:"taken_by",label:_t("taken_by","Taken By")},{key:"created_at",label:_t("created_at","Created At"),formatter:function(t){return e.$options.filters.dayjs(t)}}]}},mounted:function(){this.getItems(this.sale&&this.sale.id?this.sale.id:this.$route.params.id)},methods:{getItems:function(e){var t=this;axios.post(route("Backend.Payments.Single.Sales.Payments",{sale:e}).url()).then((function(e){t.$set(t,"items",e.data)})).catch((function(e){t.$set(t,"items",[]),console.log(e.response)}))}}},s=a(1),n=Object(s.a)(r,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-row",[e.customerOverview?a("b-col",{attrs:{md:"4",sm:"12"}},[a("table",{staticClass:"table table-sm table-striped table-bordered"},[a("tr",[a("th",[e._v(e._s(e.__("customer_id","Customer ID")))]),e._v(" "),a("td",[e._v(": "+e._s(e.sale.customer_id))])]),e._v(" "),a("tr",[a("th",[e._v(e._s(e.__("customer_name","Customer Name")))]),e._v(" "),a("td",[e._v(": "+e._s(e.sale.customer_name))])]),e._v(" "),a("tr",[a("th",[e._v(e._s(e.__("payable","Payable")))]),e._v(" "),a("td",[e._v(": "+e._s(e._f("currency")(e.sale.payable)))])]),e._v(" "),a("tr",[a("th",[e._v(e._s(e.__("paid","Paid")))]),e._v(" "),a("td",[e._v(": "+e._s(e._f("currency")(e.sale.paid)))])]),e._v(" "),a("tr",[a("th",[e._v(e._s(e.__("balance","Balance")))]),e._v(" "),a("td",[e._v(": "+e._s(e._f("currency")(e.sale.balance)))])])])]):e._e(),e._v(" "),a("b-col",[a("b-table",{attrs:{small:"","head-variant":"dark",items:e.items,fields:e.fields}})],1)],1)}),[],!1,null,"1429012e",null);t.a=n.exports}}]);