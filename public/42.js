(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{143:function(e,t,n){"use strict";n.r(t);var a=n(15),r=n(2),i=n(63),o={props:{supplierRecord:{type:Object,required:!0}},data:function(){var e=this;return{items:[],fields:[{key:"id",label:_t("id","ID")},{key:"supplier_name",label:_t("supplier_name","Supplier Name")},{key:"payable",label:_t("payable","Payable"),formatter:function(t){return e.$options.filters.currency(t)}},{key:"paid",label:_t("paid","Paid"),formatter:function(t){return e.$options.filters.currency(t)}},{key:"balance",label:_t("balance","Balance"),formatter:function(t){return e.$options.filters.currency(t)}},{key:"payment_amount",label:_t("payment_amount","Payment Amount")},{key:"action",label:_t("action","Action"),tdClass:"text-right",thClass:"text-right"}]}},computed:{totalPaymentAmount:function(){var e=0;return this.items.forEach((function(t){e+=Number(t.payment_amount||0)})),e}},methods:{getItems:function(){var e=this;return axios.post(route("Backend.Purchases.Due",{supplier:this.supplierRecord.id}).url()).then((function(t){return e.items=t.data,t.data})).catch((function(t){return console.log(t.response),e.items=[],[]}))},handlePaymentSubmit:function(e,t){var n=this;if(this.$refs[e].reportValidity()){var a=JSON.parse(JSON.stringify(t));a.supplier_id=this.supplierRecord.id,a.payment_method="Credit",axios.post(route("Backend.Payments.Purchases.Store",{purchase:a.id}).url(),a).then((function(e){n.$emit("success",!0),n.$emit("message",e.data),a=JSON.parse(JSON.stringify(t)),t.payment_amount=0})).catch((function(e){n.$emit("success",!1),n.$emit("message",e.response.data),console.log(e.response.data)}))}}}},s=n(1),u=Object(s.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h4",{staticClass:"text-center"},[e._v("\n        "+e._s([e.supplierRecord.id,e.supplierRecord.name].join(" # "))+"\n    ")]),e._v(" "),n("table",{staticClass:"table table-sm table-borderless"},[n("tr",[n("th",{staticClass:"w-25"},[e._v("\n                "+e._s(e.__("available_funds","Available Funds"))+"\n            ")]),e._v(" "),n("td",[e._v(e._s(e._f("currency")(e.supplierRecord.funds_balance)))])]),e._v(" "),n("tr",[n("th",[e._v(e._s(e.__("payment_amount","Payment Amount")))]),e._v(" "),n("td",[e._v(e._s(e._f("currency")(e.totalPaymentAmount)))])]),e._v(" "),n("tr",[n("th",[e._v(e._s(e.__("balance","Balance")))]),e._v(" "),n("td",[e._v("\n                "+e._s(e._f("currency")(Number(e.supplierRecord.funds_balance||0)-Number(e.totalPaymentAmount||0)))+"\n            ")])])]),e._v(" "),n("b-table",{attrs:{"head-variant":"dark",hover:"",striped:"",small:"",items:e.getItems,fields:e.fields},scopedSlots:e._u([{key:"cell(paid)",fn:function(t){return[e._v("\n            "+e._s(e._f("currency")(Number(t.item.paid||0)+Number(t.item.payment_amount||0)))+"\n        ")]}},{key:"cell(balance)",fn:function(t){return[e._v("\n            "+e._s(e._f("currency")(Number(t.item.balance||0)-Number(t.item.payment_amount||0)))+"\n        ")]}},{key:"cell(payment_amount)",fn:function(t){return[n("b-form",{ref:"payment-form-"+t.index},[n("b-input-group",{scopedSlots:e._u([{key:"append",fn:function(){return[n("b-button",{on:{click:function(n){return e.$set(t.item,"payment_amount",t.item.balance)}}},[e._v("\n                            "+e._s(e.__("full","Full"))+"\n                        ")])]},proxy:!0}],null,!0)},[n("b-input",{attrs:{required:!0,type:"number",step:"any",min:0,max:Number(e.supplierRecord.funds_balance),placeholder:e.__("payment_amount","Payment Amount")},model:{value:t.item.payment_amount,callback:function(n){e.$set(t.item,"payment_amount",n)},expression:"row.item.payment_amount"}})],1)],1)]}},{key:"cell(action)",fn:function(t){return[n("b-button",{attrs:{variant:"primary"},on:{click:function(n){return e.handlePaymentSubmit("payment-form-"+t.index,t.item)}}},[e._v("\n                "+e._s(e.__("submit","SUBMIT"))+"\n            ")])]}}])})],1)}),[],!1,null,"99746ec8",null).exports,l={components:{VueSelect:a.a,AddFund:i.a,DuePurchases:u},data:function(){return{form:{},output:{}}},methods:{msgBox:r.k,obj2Table:r.l,startCase:r.s,supplierSelected:function(e){this.form.supplier_id=e?e.id:null,e&&e.id&&this.getSupplier(e.id)},getSupplier:function(e){var t=this;axios.post(route("Backend.Balance.Suppliers.Single").url(),{supplier_id:e}).then((function(e){t.$set(t,"output",e.data),console.log(e.data)})).catch((function(e){t.$set(t,"output",{}),console.log(e.response.data)}))}}},d=Object(s.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-card",{attrs:{header:e.__("supplier_balance_sheet","Supplier Balance Sheet"),"body-class":"p-2"},scopedSlots:e._u([e.form.supplier?{key:"footer",fn:function(){return[n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal:add_fund_modal",arg:"add_fund_modal"}],attrs:{size:"sm",variant:"primary",title:e.__("add_more_fund","Add More Fund")}},[e._v("\n                "+e._s(e.__("add_fund","Add Fund"))+"\n            ")]),e._v(" "),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal:due_sales_modal",arg:"due_sales_modal"}],attrs:{size:"sm",title:e.__("make_due_purchase_payment_from_available_fund","Make Due Purchase Payment From Available Fund"),variant:"dark"}},[e._v("\n                "+e._s(e.__("make_due_payments","Make Due Payments"))+"\n            ")])]},proxy:!0}:null],null,!0)},[n("vue-select",{attrs:{required:!0,api_url:e.route("Backend.Suppliers.Search").url()},on:{input:e.supplierSelected},scopedSlots:e._u([{key:"option",fn:function(t){return[e._v("\n                "+e._s([t.item.id,t.item.name,t.item.phone,t.item.email].join(" # "))+"\n            ")]}},{key:"tag",fn:function(t){return[e._v("\n                "+e._s(t.tag?[t.tag.id,t.tag.name,t.tag.phone,t.tag.email].join(" # "):e.__("not_selected","Not Selected"))+"\n            ")]}}]),model:{value:e.form.supplier,callback:function(t){e.$set(e.form,"supplier",t)},expression:"form.supplier"}}),e._v(" "),e.output?n("b-table",{attrs:{"head-variant":"dark",bordered:"",hover:"",striped:"",small:"",fields:[{key:"key",label:e.__("key","Key")},{key:"value",label:e.__("value","Value")}],items:e.obj2Table(e.output)},scopedSlots:e._u([{key:"cell(key)",fn:function(t){return[e._v("\n                "+e._s(e.__(t.item.key,e.startCase(t.item.key)))+"\n            ")]}},{key:"cell(value)",fn:function(t){return[["funds_deposit","funds_withdrawn","funds_balance","deposit_amount","withdrawn_amount","sales_payable","sales_paid","sales_balance","final_balance"].includes(t.item.key)?[n("strong",{class:{"text-danger":["funds_balance","sales_balance"].includes(t.item.key)}},[e._v("\n                        "+e._s(e._f("currency")(t.item.value))+"\n                    ")])]:[e._v("\n                    "+e._s(t.item.value)+"\n                ")]]}}],null,!1,423265688)}):e._e()],1),e._v(" "),e.form.supplier?n("b-modal",{attrs:{id:"add_fund_modal",lazy:"","hide-footer":"",title:e.__("add_fund","Add Fund"),"header-bg-variant":"dark","header-text-variant":"light"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.hide;return[e.form.supplier&&e.form.supplier.id?n("add-fund",{attrs:{supplier_id:e.form.supplier.id},on:{success:function(e){e&&a()},refresh:function(t){return e.getSupplier(e.form.supplier.id)}}}):e._e()]}}],null,!1,2976852238)}):e._e(),e._v(" "),e.output?n("b-modal",{attrs:{id:"due_sales_modal","body-class":"p-1",lazy:"",size:"xl","hide-footer":"",title:e.__("due_purchases","Due Purchases"),"header-bg-variant":"dark","header-text-variant":"light"},scopedSlots:e._u([{key:"default",fn:function(t){t.hide;return[n("due-purchases",{attrs:{"supplier-record":e.output},on:{message:function(t){return e.msgBox(t)},success:function(t){t&&e.getSupplier(e.output.id)}}})]}}],null,!1,2054738912)}):e._e()],1)}),[],!1,null,null,null);t.default=d.exports},15:function(e,t,n){"use strict";var a=n(0),r={props:{value:{type:null|Object,default:function(){return null}},api_url:{type:String,default:null,required:!0},prepend:{type:String,default:""},append:{type:String,default:""},placeholder:{type:String,default:"Search Items"},size:{type:String,default:"sm"},autocomplete:{type:String,default:"off"},dropdownVariant:{type:String,default:"outline-secondary"},emptyOptionText:{type:String,default:"No items available to select"},inputClass:{type:String|Array,default:function(){return[]}},menuStyle:{type:String|Array,default:function(){return[]}},clearSearchOnItemSelected:{type:Boolean,default:!1},initOptions:{type:Boolean|String,default:!1},required:{type:Boolean,default:!1},state:{type:Boolean,default:null},hideDdIcon:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},menuClass:{type:String|Object,default:function(){return""}},getFiltered:{type:Function},clearSearchOnDropdownHidden:{type:Boolean,default:function(){return!0}},optionText:{type:Function},tagText:{Type:Function}},data:function(){return{options:[],query:"",selected_item:null}},mounted:function(){this.initOptions&&(Object(a.a)(this.initOptions)&&this.initOptions?this.getItems(""):this.query=this.initOptions),this.$set(this,"selected_item",this.value)},computed:{getOptions:function(){return"function"==typeof this.getFiltered&&this.getFiltered?this.getFiltered(this.options):this.options}},watch:{value:{deep:!0,handler:function(e){this.$set(this,"selected_item",e)}}},methods:{reset:function(){this.$emit("input",null),this.$set(this,"selected_item",null),this.query=""},itemSelected:function(e){this.$emit("input",e),this.$set(this,"selected_item",e),this.clearSearchOnItemSelected&&(this.query=null)},getItems:function(e){var t=this;axios.post(this.api_url,{query:this.query}).then((function(e){t.$set(t,"options",e.data||[])})).catch((function(e){t.$set(t,"options",[]),console.error(e.response)}))}}},i=(n(94),n(1)),o=Object(i.a)(r,(function(){var e=this,t=this,n=t.$createElement,a=t._self._c||n;return a("div",{staticClass:"vue-select form-control p-0",class:{"is-invalid":null!==t.state&&t.state,"is-valid":null!==t.state&&!t.state}},[t.required?a("input",{staticStyle:{height:"0",position:"absolute",top:"0",border:"0",outline:"0","z-index":"-1"},attrs:{type:"text",required:!0},domProps:{value:t.value?"initialized":""}}):t._e(),t._v(" "),a("b-dropdown",{class:{"hide-dd-icon":t.hideDdIcon,disabled:t.disabled},style:t.menuStyle,attrs:{block:"",lazy:"",variant:t.dropdownVariant,disabled:t.disabled,"toggle-class":"text-left m-0 border-0 border-radius-0","menu-class":t.menuClass},on:{hidden:function(){t.$emit("hidden",!0),e.clearSearchOnDropdownHidden&&(e.query="")}},scopedSlots:t._u([{key:"button-content",fn:function(){return[t._t("tag",[t._v("\n                "+t._s("function"==typeof t.tagText?t.tagText(t.selected_item):(t.selected_item,t.placeholder))+"\n            ")],{tag:t.selected_item})]},proxy:!0}],null,!0)},[t._v(" "),a("div",{staticClass:"px-2"},[a("b-form-input",{class:t.inputClass,attrs:{autofocus:"",type:"search",size:t.size,placeholder:t.placeholder,autocomplete:t.autocomplete},on:{keypress:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.preventDefault()},input:function(e){return t.getItems(e)}},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}})],1),t._v(" "),a("b-dropdown-divider"),t._v(" "),t._l(t.getOptions,(function(e,n){return a("b-dropdown-item",{key:n,on:{click:function(n){return t.itemSelected(e)}}},[t._t("option",[t._v("\n                "+t._s("function"==typeof t.optionText?t.optionText(e):e)+"\n            ")],{item:e,query:t.query})],2)})),t._v(" "),0===t.options.length?[t._t("empty",[0===t.options.length?a("b-dropdown-text",[t._v("\n                    "+t._s(t.emptyOptionText)+"\n                ")]):t._e()],{query:t.query})]:t._e(),t._v(" "),t._t("default_item",null,{query:t.query})],2)],1)}),[],!1,null,null,null);t.a=o.exports},46:function(e,t,n){var a=n(18),r=n(95);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var i={insert:"head",singleton:!1};a(r,i);e.exports=r.locals||{}},63:function(e,t,n){"use strict";var a=n(8),r=n.n(a),i=n(2),o={props:{supplier_id:{type:Number,required:!0}},data:function(){return{form:{payment_amount:0,payment_method:"Cash",date:r()().format("YYYY-MM-DD")}}},methods:{msgBox:i.k,handleSubmit:function(){var e=this;axios.post(route("Backend.Supplier.Funds.Store",{supplier:this.supplier_id}).url(),this.form).then((function(t){e.msgBox(t.data),e.$emit("success",!0),e.$emit("refresh",!0)})).catch((function(t){e.$emit("success",!1),e.msgBox(t.response.data),console.log(t.response)}))}}},s=n(1),u=Object(s.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-form",{on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[n("b-form-group",{attrs:{label:e.__("payment_amount","Payment Amount")}},[n("b-input",{attrs:{type:"number",step:"any",required:!0},model:{value:e.form.payment_amount,callback:function(t){e.$set(e.form,"payment_amount",t)},expression:"form.payment_amount"}})],1),e._v(" "),n("b-form-group",{attrs:{label:e.__("payment_method","Payment Method")}},[n("b-select",{attrs:{required:!0,options:["Cash","Card","Bank","Rocket","bKash"]},model:{value:e.form.payment_method,callback:function(t){e.$set(e.form,"payment_method",t)},expression:"form.payment_method"}})],1),e._v(" "),n("b-form-group",{attrs:{label:e.__("date","Date")}},[n("b-input",{attrs:{type:"date",required:!0},model:{value:e.form.date,callback:function(t){e.$set(e.form,"date",t)},expression:"form.date"}})],1),e._v(" "),n("b-button",{attrs:{block:"",variant:"dark",type:"submit"}},[e._v("\n        "+e._s(e.__("submit","SUBMIT"))+"\n    ")])],1)}),[],!1,null,null,null);t.a=u.exports},94:function(e,t,n){"use strict";var a=n(46);n.n(a).a},95:function(e,t,n){(t=n(19)(!1)).push([e.i,".vue-select .dropdown-menu {\n  max-height: 300px;\n  overflow-y: auto;\n  width: 100%;\n}\n.vue-select .dropdown-toggle::after {\n  position: absolute;\n  right: 10px;\n  top: 49%;\n}\n.vue-select .border-radius-0 {\n  border-radius: 0 !important;\n}\n.vue-select .top-reverse-100 {\n  top: -100% !important;\n}\n.vue-select .hide-dd-icon .dropdown-toggle::after {\n  display: none !important;\n}\n.vue-select.is-invalid, .vue-select.is-valid {\n  background-position: right calc(1.4em + 0.1875rem) center !important;\n}",""]),e.exports=t}}]);