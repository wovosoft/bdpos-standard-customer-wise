(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{12:function(t,e,a){"use strict";var r=a(2),n=a(21);e.a={props:{item:{type:Object,default:function(){return{}}}},methods:{obj2Table:r.l,startCase:n.a,getItem:r.e},data:function(){return{the_item:{}}},mounted:function(){var t=this;this.the_item=this.item,Object.keys(this.item).length||this.getItem(this.$route.params.id,this.$parent.$props.api_url).then((function(e){t.the_item=e.data})).catch((function(t){return console.log(t.response)}))}}},151:function(t,e,a){"use strict";a.r(e);var r=a(12),n=a(24),i={mixins:[r.a],methods:{returnItems:function(t){var e=this;return t.returning?t.quantity-t.returned_quantity<t.returning?(this.$root.msgBox({message:"Return Qty. should be less than available quantity",type:"danger",title:"Failed"}),!1):void axios.post(route("Backend.Sales.Items.Return",{sale:t.sale_id,sale_item:t.id}).url(),{returning:t.returning}).then((function(t){e.$root.msgBox(t.data),e.dirty=!0,e.getItem(e.$route.params.id,e.$parent.$props.api_url).then((function(t){e.the_item=t.data})).catch((function(t){return console.log(t.response)}))})).catch((function(t){e.$root.msgBox(t.response.data),console.log(t.response)})):(this.$root.msgBox({message:"Return Qty. should not be empty or zero",type:"danger",title:"Failed"}),!1)}},data:function(){var t=this;return{dirty:!1,statuses:n.a,saleItemFields:[{key:"product_name",label:_t("product_name","Product Name")},{key:"quantity",label:_t("quantity","Quantity")},{key:"price",label:_t("price","Price"),formatter:function(e){return t.$options.filters.currency(e)}},{key:"payable",label:_t("payable","Payable"),formatter:function(e){return t.$options.filters.currency(e)}},{key:"returned_quantity",label:_t("returned_quantity","Returned Qty.")},{key:"returned_total",label:_t("returned_total","Returned Total"),formatter:function(e){return t.$options.filters.currency(e)}}]}}},s=a(1),l=Object(s.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{attrs:{visible:"",size:"xl","header-bg-variant":"dark","header-text-variant":"light","no-body":"",title:t.__("view_sale","View Sale"),lazy:""},on:{hidden:function(){t.$router.go(-1),t.$emit("reset",!0),t.dirty&&t.$emit("refreshDatatable",!0)}}},[a("b-row",[a("b-col",{attrs:{sm:"12",md:"4"}},[a("h4",[t._v(t._s(t.__("customer_details","Customer Details")))]),t._v(" "),a("b-table",{staticStyle:{border:"1px solid lightgray"},attrs:{items:t.obj2Table(t.the_item.customer,["deleted_at","created_at","updated_at","photo","shipping_address","id"]),fields:[{key:"key",label:t.__("key","Key"),formatter:function(e){return t.__(e,t.startCase(e))}},{key:"value",label:t.__("value","Value")}],striped:"",small:"","head-variant":"dark"},scopedSlots:t._u([{key:"cell(value)",fn:function(e){return[["created_at","updated_at"].includes(e.item.key)?[t._v("\n                        "+t._s(t._f("dayjs")(e.item.value))+"\n                    ")]:[t._v(t._s(e.item.value))]]}}])})],1),t._v(" "),a("b-col",{attrs:{sm:"12",md:"8"}},[a("h4",[t._v(t._s(t.__("sale_details","Sale Details")))]),t._v(" "),a("b-table",{staticStyle:{border:"1px solid lightgray"},attrs:{small:"",hover:"",striped:"","head-variant":"dark",items:t.obj2Table(t.the_item,["deleted_at","image","items","customer","customer_name","customer_id","tax","discount","updated_at","total","status"]),fields:[{label:t.__("key","Key"),key:"key",sortable:!0,formatter:function(e){return t.__(e,t.startCase(e))}},{label:t.__("value","Value"),key:"value",sortable:!0}]},scopedSlots:t._u([{key:"cell(value)",fn:function(e){return[["created_at","updated_at"].includes(e.item.key)?[t._v("\n                        "+t._s(t._f("dayjs")(e.item.value))+"\n                    ")]:["description"].includes(e.item.key)?[a("div",{domProps:{innerHTML:t._s(e.item.value)}})]:["thumbnail"].includes(e.item.key)?[a("b-img-lazy",{attrs:{fluid:"",src:e.item.value}})]:[t._v(t._s(e.item.value))]]}}])})],1)],1),t._v(" "),a("h3",{staticClass:"text-center"},[t._v(t._s(t.__("sale_items","Sale Items")))]),t._v(" "),a("b-table",{attrs:{small:"",striped:"",bordered:"","head-variant":"dark",items:t.the_item.items,fields:t.saleItemFields},scopedSlots:t._u([{key:"cell(returned_quantity)",fn:function(e){return[a("b-form",{on:{submit:function(a){return a.preventDefault(),t.returnItems(e.item)}}},[a("b-input-group",{attrs:{size:"sm"},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("b-input-group-text",{staticClass:"text-right",staticStyle:{"min-width":"100px"}},[t._v("\n                            "+t._s(t._f("localNumber")(e.item.returned_quantity))+"\n                        ")])]},proxy:!0},{key:"append",fn:function(){return[a("b-button",{attrs:{title:t.__("submit","Submit"),type:"submit"}},[a("b-icon-plus")],1)]},proxy:!0}],null,!0)},[t._v(" "),a("b-input",{attrs:{max:e.item.quantity-e.item.returned_quantity,type:"number",step:"any",required:!0,placeholder:"Return Quantity"},model:{value:e.item.returning,callback:function(a){t.$set(e.item,"returning",a)},expression:"row.item.returning"}})],1)],1)]}}])})],1)}),[],!1,null,null,null);e.default=l.exports},24:function(t,e,a){"use strict";e.a=[{text:_t("returned","Returned"),value:"Returned"},{text:_t("processed","Processed"),value:"Processed"},{text:_t("cancelled","Cancelled"),value:"Cancelled"}]}}]);